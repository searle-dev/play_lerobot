# SO101 机械臂 Web 控制系统

一个基于 Web 的实时机械臂控制界面，支持按键和鼠标控制。

## 功能特点

- 🎮 **实时控制**：通过网页按钮或键盘控制机械臂
- 📊 **状态显示**：实时显示所有关节的位置
- 🔄 **WebSocket 通信**：低延迟的实时双向通信
- 🎨 **现代 UI**：美观的渐变色界面设计
- ⌨️ **键盘快捷键**：支持键盘快速控制

## 安装依赖

```bash
cd /Users/ai/Project/play_lerobot/web_control
pip install -r requirements.txt
```

## 配置

编辑 `server.py` 中的机械臂端口：

```python
ROBOT_PORT = "/dev/tty.usbmodem5A7C1163141"  # 修改为您的端口
```

## 启动服务器

```bash
python server.py
```

服务器将在 `http://localhost:5000` 启动。

## 使用方法

### 1. 打开浏览器

访问 `http://localhost:5000`

### 2. 控制方式

#### 鼠标控制
- 点击界面上的按钮控制各个关节

#### 键盘控制
- **Q/A**: 关节1（底座旋转）减小/增大
- **W/S**: 关节2（大臂升降）减小/增大
- **E/D**: 关节3（小臂弯曲）减小/增大
- **R/F**: 关节4（腕部俯仰）减小/增大
- **T/G**: 关节5（腕部旋转）减小/增大
- **Y/H**: 夹爪 关闭/打开

### 3. 紧急停止

点击"紧急停止"按钮可立即断开机械臂连接。

## 技术架构

- **后端**: Flask + Flask-SocketIO
- **前端**: HTML + CSS + JavaScript
- **通信**: WebSocket (Socket.IO)
- **机械臂控制**: LeRobot

## 目录结构

```
web_control/
├── server.py           # Flask 服务器
├── templates/
│   └── index.html      # Web 界面
├── requirements.txt    # Python 依赖
└── README.md          # 说明文档
```

## 安全注意事项

⚠️ **重要提示**：
- 确保机械臂周围有足够的安全空间
- 第一次使用时从小幅度移动开始测试
- 遇到异常立即点击紧急停止
- 不要在无人监管的情况下运行

## 故障排查

### 无法连接机械臂
1. 检查机械臂是否通电
2. 检查 USB 连接是否正常
3. 确认端口配置是否正确
4. 运行 `ls /dev/tty.usb*` 查看可用端口

### 网页无法打开
1. 检查 Python 依赖是否安装完整
2. 确认 5000 端口未被占用
3. 查看终端错误日志

### 控制无响应
1. 检查浏览器控制台是否有错误
2. 确认 WebSocket 连接状态
3. 尝试刷新页面重新连接

## 扩展功能建议

- [ ] 添加视频流显示
- [ ] 记录和回放动作序列
- [ ] 多机械臂协同控制
- [ ] 轨迹规划可视化
- [ ] 移动端适配

## 许可证

MIT License
