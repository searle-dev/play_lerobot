# SO101 机械臂网页控制

基于 Flask + Socket.IO 的实时网页控制界面，支持键盘和虚拟按键控制 SO101 机械臂。

## 功能特性

- ✅ 实时 WebSocket 通信
- ✅ 键盘快捷键控制
- ✅ 虚拟按键界面
- ✅ 实时关节状态显示
- ✅ P 控制算法
- ✅ 可调节控制参数
- ✅ 操作日志记录

## 安装依赖

```bash
cd /Users/ai/Project/play_lerobot/so101_web_control
pip install -r requirements.txt
```

## 运行

```bash
python app.py
```

然后在浏览器中访问：`http://localhost:5000`

## 使用说明

### 1. 连接机器人

1. 确认 SO101 手臂已通过 USB 连接并通电
2. 在"机械臂端口"输入框中输入端口（默认已填好）
3. 点击"连接"按钮

### 2. 控制机械臂

**方式一：键盘控制**
- `Q/A`: 关节1（底座旋转）
- `W/S`: 关节2（大臂上下）
- `E/D`: 关节3（小臂弯曲）
- `R/F`: 关节4（腕部）
- `T/G`: 关节5（腕部旋转）
- `Y/H`: 夹爪（打开/关闭）

**方式二：点击虚拟按键**
- 直接点击界面上的按钮控制

### 3. 调节参数

- **步进大小**：每次按键移动的角度（默认 5°）
- **夹爪步进**：夹爪每次移动的幅度（默认 10）
- **比例增益**：P 控制的增益系数（默认 0.5）

### 4. 重置

点击"重置到零位"按钮，所有关节回到零位（夹爪回到中间位置）。

## 技术架构

### 后端 (Flask + Socket.IO)
- `app.py`: 主服务器
- 实时 WebSocket 通信
- P 控制循环（50Hz）
- LeRobot 机器人接口

### 前端 (HTML + CSS + JavaScript)
- `templates/index.html`: 主页面
- `static/css/style.css`: 样式
- `static/js/app.js`: 控制逻辑
- Socket.IO 客户端

## 注意事项

1. 确保已安装 LeRobot 和 feetech-servo-sdk
2. 确保机器人已正确校准
3. 首次使用前建议先在终端测试机器人连接
4. 网页控制使用与终端相同的控制算法

## 故障排查

### 连接失败
- 检查端口是否正确
- 确认手臂已通电
- 确认 USB 线连接正常

### 夹爪不动
- 检查夹爪是否已正确校准
- 确认目标值在 0-100 范围内

### 控制延迟
- 检查网络连接
- 尝试降低控制频率
- 调整比例增益 Kp

## 开发

修改后重启服务器：
```bash
# Ctrl+C 停止
python app.py
```

## 许可

与 XLeRobot 项目相同的 Apache 2.0 许可。
